<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WAVESIGHT - Trend Tracker Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://api.fontshare.com/v2/css?f[]=satoshi@400,500,600,700&display=swap" rel="stylesheet">

    <!-- Load required libraries -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/recharts@2.5.0/umd/Recharts.js"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
    <div class="container">
        <div class="header-bar">
            <div class="logo-group">
                <img src="logo2.png" alt="Logo" class="logo-icon">
                <span class="logo-text">WAVESIGHT</span>
            </div>
            <div class="nav-links" id="navLinks">
                <a href="index.html" class="nav-link active">Trends</a>
                <a href="sentiment-dashboard.html" class="nav-link">Sentiment</a>
                <a href="alerts-dashboard.html" class="nav-link">Alerts</a>
                <a href="#about" class="nav-link" onclick="showAboutModal()">About Us</a>
                <a href="#settings" class="nav-link" onclick="showSettingsModal()">Settings</a>
                <a href="#developers" class="nav-link" onclick="showDevelopersModal()">For Developers</a>
            </div>
            <div class="auth-section">
                <div id="userSection" class="user-section" style="display: none;">
                    <!-- User info will be populated by JavaScript -->
                </div>
                <div id="loginSection" class="login-section">
                    <script authed="handleAuthSuccess(window.replit.user)" src="https://auth.util.repl.co/script.js"></script>
                </div>
            </div>
            <button class="menu-btn" onclick="toggleMobileMenu()">‚ò∞</button>
        </div>

        <div class="header">
            <div class="submit-bar">
                <div class="filter-group-title">
                    Filters & Controls
                    <div class="status-indicators">
                        <span id="liveStatus" class="status-indicator">üü¢ Live</span>
                        <span id="lastRefresh" class="last-refresh">Ready</span>
                    </div>
                </div>
                <div class="filter-group">
                    <select id="trendFilter" onchange="filterChart()">
                        <option value="all">All Trends</option>
                    </select>
                    <input type="date" id="startDate" onchange="filterByDateRange()">
                    <input type="date" id="endDate" onchange="filterByDateRange()">
                    <input type="text" placeholder="Search trends... (Ctrl+F)" id="searchInput">
                </div>
                <div class="button-group">
                    <button class="submit-btn" onclick="performComprehensiveSearch()">Search</button>
                    <button class="submit-btn" onclick="resetToDefaultView()" style="background: #374151;">Reset</button>
                    <button class="submit-btn" onclick="fetchFreshYouTubeData()" style="background: #10B981;" title="Ctrl+R">üîÑ Fetch Data</button>
                    <button class="submit-btn" onclick="fetchBulkData('all', 50)" style="background: #8B5CF6;">Fetch More</button>
                    <button class="submit-btn" onclick="processCulturalTrends()" style="background: #06b6d4;">üß† Analyze Trends</button>
                    <button class="submit-btn" onclick="toggleAutoRefresh()" style="background: #7C3AED;" id="autoRefreshBtn">‚è∞ Auto-Refresh</button>
                </div>
            </div>
        </div>



        <div class="chart-section">
            <h2>WaveScope Timeline</h2>
            <div id="trendChart"></div>
        </div>

        <div class="chart-section">
            <h2>üìä Detailed Trends Analysis</h2>
            <div class="trends-table-controls">
                <div class="control-group">
                    <label class="control-label">Category</label>
                    <select class="control-input" id="detailedCategoryFilter">
                        <option value="all">All Categories</option>
                        <option value="AI Tools">AI Tools</option>
                        <option value="Crypto">Crypto</option>
                        <option value="Gaming">Gaming</option>
                        <option value="Technology">Technology</option>
                        <option value="Entertainment">Entertainment</option>
                        <option value="Health & Fitness">Health & Fitness</option>
                        <option value="General">General</option>
                    </select>
                </div>
                <div class="control-group">
                    <label class="control-label">Sort By</label>
                    <select class="control-input" id="detailedSortBy">
                        <option value="view_count">View Count</option>
                        <option value="trend_score">Trend Score</option>
                        <option value="published_at">Date</option>
                        <option value="engagement">Engagement Rate</option>
                    </select>
                </div>
                <div class="control-group">
                    <label class="control-label">Show</label>
                    <select class="control-input" id="detailedLimit">
                        <option value="10">Top 10</option>
                        <option value="25">Top 25</option>
                        <option value="50">Top 50</option>
                    </select>
                </div>
                <button class="control-btn" onclick="refreshDetailedTable()">üîÑ Refresh</button>
            </div>

            <div class="detailed-trends-container">
                <table class="detailed-trends-table" id="detailedTrendsTable">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Content</th>
                            <th>Category</th>
                            <th>Views</th>
                            <th>View Growth %</th>
                            <th>Engagement</th>
                            <th>Score</th>
                            <th>Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="detailedTrendsTableBody">
                        <!-- Detailed trends will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>

        <div class="chart-section">
            <h2>Trending Topics Overview</h2></div>
            <table class="trend-table" id="trendTable">
                <thead>
                    <tr>
                        <th>Topic Category</th>
                        <th>Sources</th>
                        <th>Total Reach</th>
                        <th>Trend Score</th>
                    </tr>
                </thead>
                <tbody id="trendTableBody">
                    <!-- Table content will be populated by JavaScript -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- About Us Modal -->
    <div id="aboutModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>About WAVESIGHT</h2>
                <button class="modal-close" onclick="closeModal('aboutModal')">√ó</button>
            </div>
            <div class="modal-body">
                <div class="about-section">
                    <h3>üåä Mission</h3>
                    <p>WAVESIGHT is the premier trending analytics platform that transforms how you understand and predict digital trends. We combine real-time data collection with advanced analytics to provide unprecedented insights into emerging patterns across social media and digital platforms.</p>

                    <h3>üöÄ Features</h3>
                    <ul>
                        <li><strong>Real-time Trend Analysis:</strong> Track trending topics as they emerge and evolve</li>
                        <li><strong>Sentiment Analysis:</strong> Understand public sentiment and emotional responses</li>
                        <li><strong>Predictive Insights:</strong> AI-powered trend forecasting and pattern recognition</li>
                        <li><strong>Interactive Visualizations:</strong> Dynamic charts and dashboards for data exploration</li>
                        <li><strong>Custom Alerts:</strong> Get notified when trends match your criteria</li>
                    </ul>

                    <h3>üìä Data Sources</h3>
                    <p>We aggregate data from multiple sources including YouTube, social media platforms, and news outlets to provide comprehensive trend coverage.</p>

                    <h3>üí° Innovation</h3>
                    <p>Built with cutting-edge technology including Canvas-based visualizations, real-time data processing, and advanced machine learning algorithms for trend prediction.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚öôÔ∏è Settings</h2>
                <button class="modal-close" onclick="closeModal('settingsModal')">√ó</button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h3>üìä Dashboard Preferences</h3>
                    <div class="setting-item">
                        <label>Default Chart View:</label>
                        <select id="defaultChartView" onchange="saveSettings()">
                            <option value="all">All Trends</option>
                            <option value="top5">Top 5 Trends</option>
                            <option value="categories">By Categories</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <label>Auto-refresh Interval:</label>
                        <select id="refreshInterval" onchange="saveSettings()">
                            <option value="never">Manual Only</option>
                            <option value="5min">Every 5 minutes</option>
                            <option value="15min">Every 15 minutes</option>
                            <option value="1hour">Every hour</option>
                        </select>
                    </div>

                    <h3>üé® Appearance</h3>
                    <div class="setting-item">
                        <label>Theme:</label>
                        <select id="themeSelect" onchange="changeTheme()">
                            <option value="dark">Dark (Default)</option>
                            <option value="light">Light</option>
                            <option value="auto">Auto (System)</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <label>Chart Animation:</label>
                        <input type="checkbox" id="chartAnimation" checked onchange="saveSettings()">
                        <span>Enable smooth animations</span>
                    </div>

                    <h3>üîî Notifications</h3>
                    <div class="setting-item">
                        <label>Browser Notifications:</label>
                        <input type="checkbox" id="browserNotifications" onchange="toggleNotifications()">
                        <span>Allow browser notifications for alerts</span>
                    </div>

                    <div class="setting-item">
                        <label>Sound Alerts:</label>
                        <input type="checkbox" id="soundAlerts" onchange="saveSettings()">
                        <span>Play sound for trend alerts</span>
                    </div>

                    <h3>üíæ Data Management</h3>
                    <div class="setting-item">
                        <button class="settings-btn" onclick="exportData()">üì• Export Data</button>
                        <button class="settings-btn" onclick="clearCache()">üóëÔ∏è Clear Cache</button>
                        <button class="settings-btn" onclick="resetSettings()">üîÑ Reset Settings</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- For Developers Modal -->
    <div id="developersModal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2>üë®‚Äçüíª For Developers</h2>
                <button class="modal-close" onclick="closeModal('developersModal')">√ó</button>
            </div>
            <div class="modal-body">
                <div class="developers-section">
                    <h3>üõ†Ô∏è API Documentation</h3>
                    <div class="api-section">
                        <h4>Endpoints</h4>
                        <div class="api-endpoint">
                            <code>GET /api/youtube-data</code>
                            <p>Fetch trending YouTube data with optional filters</p>
                        </div>
                        <div class="api-endpoint">
                            <code>GET /api/fetch-youtube?q=search&maxResults=50</code>
                            <p>Search for specific trending content</p>
                        </div>
                        <div class="api-endpoint">
                            <code>GET /api/health</code>
                            <p>Check API health and configuration status</p>
                        </div>
                        <div class="api-endpoint">
                            <code>POST /api/process-trends</code>
                            <p>Trigger cultural trend analysis processing</p>
                        </div>
                    </div>

                    <h3>üîß Configuration</h3>
                    <div class="config-section">
                        <h4>Required Environment Variables</h4>
                        <div class="env-var">
                            <code>YOUTUBE_API_KEY</code> - YouTube Data API v3 key
                        </div>
                        <div class="env-var">
                            <code>SUPABASE_URL</code> - Supabase project URL
                        </div>
                        <div class="env-var">
                            <code>SUPABASE_ANON_KEY</code> - Supabase anonymous key
                        </div>
                        <div class="env-var">
                            <code>OPENAI_API_KEY</code> - OpenAI API key (optional)
                        </div>
                    </div>

                    <h3>üìä Architecture</h3>
                    <div class="architecture-section">
                        <h4>Frontend Stack</h4>
                        <ul>
                            <li>HTML5 with semantic structure</li>
                            <li>CSS3 with modern animations and gradients</li>
                            <li>Vanilla JavaScript with Canvas API charts</li>
                            <li>Responsive design for all devices</li>
                        </ul>

                        <h4>Backend Services</h4>
                        <ul>
                            <li>Node.js Express server (Port 5000)</li>
                            <li>Python Flask sentiment server (Port 5001)</li>
                            <li>Supabase PostgreSQL database</li>
                            <li>YouTube Data API v3 integration</li>
                        </ul>
                    </div>

                    <h3>üöÄ Deployment</h3>
                    <div class="deployment-section">
                        <h4>Replit Workflows</h4>
                        <ul>
                            <li><strong>YouTube API Server:</strong> Main backend service</li>
                            <li><strong>Sentiment Analysis Server:</strong> Text analysis service</li>
                            <li><strong>Static Web Server:</strong> Frontend hosting</li>
                            <li><strong>Cultural Trend Analysis:</strong> Advanced analytics</li>
                        </ul>

                        <h4>Database Schema</h4>
                        <p>Check <code>supabase_schema.sql</code> for complete table structure and indexes.</p>
                    </div>

                    <h3>üîç Debugging</h3>
                    <div class="debug-section">
                        <button class="debug-btn" onclick="runHealthCheck()">üè• Health Check</button>
                        <button class="debug-btn" onclick="testAPIConnection()">üîó Test API</button>
                        <button class="debug-btn" onclick="viewLogs()">üìù View Logs</button>
                        <button class="debug-btn" onclick="checkDatabase()">üóÑÔ∏è Check Database</button>
                    </div>

                    <div id="debugOutput" class="debug-output"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>